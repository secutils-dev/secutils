[package]
name = "secutils"
version = "1.0.0-beta.1"
authors = ["Secutils <dev@secutils.dev>"]
edition = "2021"

[[bin]]
name = "secutils"
path = "src/main.rs"

[dependencies]
actix-cors = "0.7.0"
actix-identity = "0.7.0"
actix-session = "0.9.0"
actix-web = "4.5.1"
actix-web-httpauth = "0.8.1"
anyhow = "1.0.79"
argon2 = "0.5.3"
async-stream = "0.3.5"
bytes = "1.5.0"
chrono = { version = "0.4.33", default-features = false }
clap = "4.4.18"
content-security-policy = "0.5.1"
cron = "0.12.0"
deno_core = "0.258.0"
directories = "5.0.1"
dotenvy = "0.15.7"
structured-logger = "1.0.3"
futures = "0.3.30"
handlebars = "5.1.0"
hex = "0.4.3"
html5ever = "0.26.0"
humantime = "2.1.0"
itertools = "0.12.1"
lettre = { version = "0.11.4", default-features = false  }
log = "0.4.20"
mailchecker = "6.0.1"
openssl = "0.10.63"
postcard = { version = "1.0.8", default-features = false  }
rand_core = "0.6.4"
regex = "1.10.3"
reqwest = "0.11.24"
rust-embed = "8.2.0"
serde = "1.0.196"
serde_bytes = "0.11.14"
serde_json = "1.0.113"
serde_repr = "0.1.18"
serde_with = "3.6.0"
similar = "2.4.0"
sqlx = { version = "0.7.3", default-features = false }
tantivy = "0.21.1"
thiserror = "1.0.56"
time = "0.3.34"
tlsh2 = "0.3.0"
tokio = { version = "1.36.0", features = ["full"] }
tokio-cron-scheduler = "0.10.0"
trust-dns-resolver = "0.23.2"
url = "2.5.0"
urlencoding = "2.1.3"
uuid = "1.7.0"
webauthn-rs = "0.4.8"
zip = "0.6.6"

[dev-dependencies]
ctor = "0.2.6"
httpmock = "0.7.0"
insta = "1.34.0"

[patch.crates-io]
tokio-cron-scheduler = { path = "./vendor/tokio-cron-scheduler" }

[features]
default = [
    "actix-session/cookie-session",
    "actix-web/cookies",
    "actix-web/secure-cookies",
    "bytes/serde",
    "clap/env",
    "content-security-policy/serde",
    "handlebars/rust-embed",
    "insta/filters",
    "insta/json",
    "insta/redactions",
    "lettre/builder",
    "lettre/smtp-transport",
    "lettre/tokio1-rustls-tls",
    "log/kv_unstable",
    "postcard/use-std",
    "rand_core/std",
    "reqwest/json",
    "reqwest/rustls",
    "serde/derive",
    "serde_json/arbitrary_precision",
    "serde_with/time_0_3",
    "sqlx/json",
    "sqlx/macros",
    "sqlx/migrate",
    "sqlx/runtime-tokio-rustls",
    "sqlx/sqlite",
    "sqlx/uuid",
    "time/formatting",
    "time/macros",
    "tlsh2/diff",
    "tokio/rt-multi-thread",
    "tokio/macros",
    "url/serde",
    "uuid/v7",
    "webauthn-rs/danger-allow-state-serialisation"
]

[profile.release]
strip = true
lto = true
panic = "abort"

[profile.dev.package.sqlx-macros]
opt-level = 3
